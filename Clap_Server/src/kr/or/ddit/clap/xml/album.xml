<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
         PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
         "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<!-- namespace속성 : 아래에서 작성한 SQL을 호출할 때 같이 사용된다. -->         
<sqlMap namespace="album">
   
    
    <select id="selectListAll" resultClass="albumVO">
        

          SELECT a.ALB_NO
         , a.ALB_NAME
         , a.ALB_IMAGE
         , b.SING_NAME
         , to_char(a.ALB_SALEDATE, 'yyyy/mm/dd') as ALB_SALEDATE
         , a.ALB_SALE_ENTER
      FROM ALBUM a, SINGER b
      WHERE a.SING_NO = b.SING_NO
         
    </select>
    
    
    
    <!-- 검색용 쿼리 -->
    <select id="searchList" resultClass="albumVO" parameterClass="albumVO">
            
        
          SELECT a.ALB_NO
         , a.ALB_NAME
         , a.ALB_IMAGE
         , b.SING_NAME
         , to_char(a.ALB_SALEDATE, 'yyyy/mm/dd') as ALB_SALEDATE
         , a.ALB_SALE_ENTER
      FROM ALBUM a, SINGER b
      
       <dynamic prepend="where">
      <isNotEmpty property="sing_no" prepend="and">
      	WHERE a.SING_NO = b.SING_NO
          </isNotEmpty>
          <isNotEmpty property="alb_name" prepend="and">
             a.ALB_NAME  like '%' || #alb_name# || '%'
          </isNotEmpty>
          <isNotEmpty property="sing_name" prepend="and">
             b.sing_name  like '%' || #sing_name# || '%'
          </isNotEmpty>   
       </dynamic>         
    </select>   
</sqlMap>         




